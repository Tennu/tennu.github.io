---
layout: document
title: Changelog
---

<!--<h2>v0.10.0 - The lifecycle update (Not yet published)</h2>

This update deals with error handling and disconnection by telling each plugin when they happen.

It'll probably be a while before this is published though. It feels sort of like implementing Erlang's OTP stuff.

<ul>
    <li>Bugfix: <code>Client.disconnect()</code> didn't returns the client when already disconnected.</li>
    <li>Plugin hook: 'die' called when client dies unexpectedly.</li>
    <li><code>Client.prototype.die(from: string, cause: object)</code> added for force killing a client.</li>
</ul>-->

<h2>v2.2.0</h2>

<ul>
    <li>Package: Require <a href="https://npmjs.org/package/r-result">r-result</a>.</li>
    <li>Bugfix: Cast <code>timestamp</code> to <code>Number</code> in <code>RPL_TOPICWHOTIME</code></li>
    <li>Enhancement: <b>Breaking</b>: Make <code>.join("#channel")</code> return a <code>Promise&lt;Result&lt;JoinInfo, FailMessage&gt;, Error&gt;</code></li>
    <li>Enhancement: Change <code>JoinInfo</code> to be better designed.</li>
    <li>Bugfix: Quit showing errors on successful joins.</li>
    <li>Tests: Test Join succeeds case, Timeout case.</li>
    <li>Enhancement: <code>Client.whois(user)</code> returns a <code>Promise&lt;Result&lt;WhoisInfo, FailMessage&gt;, Error&gt;</code></li>
    <li>Refactor: User plugin's <code>isIdentifiedas(nickname)</code> function now uses <code>Client.whois</code>'s promise.</li>
    <li>Enhancement: Message extensions for 421 (<code>ERR_UNKNOWNCOMMAND</code>)</li>
    <li>Enhancement: Add <code>message.channels</code> to <code>RPL_WHOISCHANNELS</code></li>
    <li>Enhancement: Added more whois response message extensions.</li>
    <li>Bugfix: Unsubscribe from timeouts when unsubscribing handlers in <code>.join()</code>, <code>.whois()</code>.</li>
    <li>Bugfix: Normalize channel properties in new message handlers to lowercase as specified in docs.</li>
</ul>

<h3>Upgrade Notes</h3>

<p>As far as I, Havvy, know, nobody was depending on the fact that <code>client.join("#chan")</code> returned a promise, and when I took a second look at the code, it was just hard to use. It was also incorrect in a few places. I've added tests to make sure that it is correct, and also changed it to return the JavaScript equivalent to Rust's result. In any case, I'm currently happy with the interface now, so feel free to use it.</p>

<p>For now, when using <code>client.whois(nickname)</code>, you will only get a promise if you whois a single nickname.</p>

<h2>v2.1.1</h2>

<p>npm for some reason didn't actually upload the changes in v.2.1.0, just gave a copy of v2.0.3. So version 2.1.0 was unpublished and v2.1.1 published because republishing is not allowed in npm.</p>

<h2>v2.1.0 - The Action Plugin Update</h2>

<ul>
    <li>Internal: Add lambda-match to plugins macros.</li>
    <li>Enhancement: "help-helpfile" config option for replacing !help nullary-arg helpfile</li>
    <li>Refactor: Single quoted strings to double quoted in various files.</li>
    <li>Enhancement: Rewrite Client.join to return a more useful promise.</li>
    <li>
        <p>Enhancement: Message extensions for the following message types.</p>
        <ul>
            <li>ERR_UNAVAILRESOURCE</li>
            <li>ERR_NEEDMOREPARAMS</li>
            <li>ERR_CHANNELISFULL</li>
            <li>ERR_INVITEONLYCHAN</li>
            <li>ERR_BANNEDFROMCHAN</li>
            <li>ERR_BADCHANNELKEY</li>
            <li>ERR_NEEDREGGEDNICK</li>
            <li>ERR_SECUREONLYCHAN</li>
            <li>ERR_OPERONLY</li>
        </ul>
    </li>
    <li>Enhancement: Add Client.kick(channel, nickname)</li>
    <li>Bugfix: Client.log should pass level to logger, not to client.</li>
    <li>Enhancement: Action.raw should log source and arguments separately.</li>
    <li>Bugfix: Client.notice(target, [message]) was not implemented.</li>
    <li>Refactor: Move OutputSocket functionality to Action plugin.</li>
    <li>Bugfix: Make Client.getPlugin &amp; related return their return value, and not the Client.</li>
    <li>Bugfix: BiSubscriber.off("!x") did not actually work.</li>
    <li>Enhancement: BiSubscriber methods are now case-insensitive.</li>
    <li>Removal: Removed Client.out. Not gonna make this v.3.0.0 because nobody was using it.</li>
</ul>

<h3>Upgrade Notes</h3>

<p>The only backwards incompatible change is the removal of the ability to pass your own OutputSocket to Tennu (not to be confused with the NetSocket or IrcSocket). I haven't seen anybody actually use that behavior though. It was replaced with the <a href="/plugins/action">Action plugin</a>.

<p>Thanks to TsundereVanila for suggesting the "help-helpfile" config option.</p>

<p>Thanks to Dan Ugore for pointing out quite a few bugs. Part of the reason I'm publishing so quickly.</p>


<h2>v2.0.3</h2>

<ul>
    <li>Bugfix: Add 'chunk' to deps.</li>
    <li>Bugfix: Command Handler needs same responsing handling as Message Handler.</li>
    <li>Bugfix: 'Message Handler' -> 'MessageHandler' in logging.</li>
</ul>

<h2>v2.0.2</h2>

<ul>
    <li>Unpublished.</li>
</ul>

<h2>v2.0.1</h2>

<ul>
    <li>Bugfix: Do not throw error calling Logger.note instead of Logger.notice in Client.quit</li>
    <li>Bugfix: Readded removed space in string from incorrect refactoring in untested method Client.userhost.</li>
</ul>

<h2>v2.0.0</h2>

<ul>
    <li>Add message extensions for MODE. They're not 'correct', based on hard-coding of Unrealircd behavior, but they're better than nothing. Thanks Dan Ugore.</li>
    <li>Breaking: Replace the deprecated <code>Client.notice()</code> with one that sends a notice on IRC. This is the cause for the major version bump.</li>
    <li>Added <code>Client.who(channel)</code> to the OutputSocket.</li>
    <li>Added support for showing your command handler in helpfiles. Use "<code>\{\{!\}\}</code>" in your help files.</li>
    <li>Added <a href="api/response">Response</a> intents of <code>"ctcp"</code>, <code>"notice"</code>, and <code>"none"</code>.</li>

    <li>Internal: Move the binary into <code>/src</code>, and then move to <code>/bin</code> so there is one canonical location for source.</li>
    <li>Internal: Started using natefaubion's <a href="//npmjs.org/package/lambda-chop">lambda-chop</a> macros.</li>
</ul>

<h3>Upgrade Notes</h3>

<p>The backwards incompatible change was that <code>Client.notice()</code> was changed from delegating to <code>Logger.notice</code> to delegating to <code>OutputSocket.notice</code>. To use <code>Logger.notice</code>, use <code>Client.note</code> instead.</p>

<h2>v1.0.1</h2>

<ul>
    <li>Peg the default realname value to the version in `package.json`.</li>
</ul>

<h2>v1.0.0 - The SemVer update</h2>

Just a version bump to start using SemVer for real. Tennu still isn't feature complete, but it's usable.

<h2>v0.9.7</h2>

<ul>
    <li>Fixed a typo in the "channel" property of the "323" message.</li>
    <li>Updated minimum <a href="https://npmjs.org/package/irc-socket">irc-socket</a> dependency to v.2.3.0 which has some timeout handling.</li>
</ul>

<h2>v0.9.6</h2>

<ul>
    <li>Fixed bug in previous version.</li>
    <li>Fixed join on success test to use promises</li>
</ul>

<h2>v0.9.5</h2>

<ul>
    <li>Fix failing tests due to non-SemVer-compliant breakages in Sinon's Fake Time capabilities.</li>
    <li>Finally replace all uses of Q.js with Bluebird.</li>
    <li>Bug: Failed to change an instance of deferred.resolve() to resolve(), causing an internal error to be thrown.</li>
</ul>

<h2>v0.9.4</h2>

<ul>
    <li>Republish of v0.9.3 since it was unpublished.</li>
</ul>

<h2>v0.9.3</h2>

<ul>
    <li>Changed build system, replacing Fez with Gulp, since Fez's maintainer vanished.</li>
    <li>Moved all source files into subdirectories in <code>/src</code>.</li>
</ul>

<h2>v0.9.2</h2>

<ul>
    <li>Bugfix: Crash in MessageHandler.</li>
</ul>

<h2>v0.9.1 - Startup plugin + bugfixes (In progress)</h2>

<ul>
    <li>Startup code in Client factory moved to startup plugin.</li>
    <li><code>Client.notice()</code> is deprecated. Use <code>Client.note()</code>. This will allow <code>.notice()</code> to be <code>/notice</code> command. No changes to the Logger are made. Logger.notice() is still the name of the logger notice method.</li>
    <li>Bugfix: Use either .removeListener() or .off() for primary event in BiSubscriber instead of just .removeListener().</li>
    <li>Bugfix: Fix listeners in <code>User.isIdentifiedAs()</code>.</li>
</ul>

<h3>Upgrade Notes</h3>

<p>Where you are using <code>Client.notice()</code>, change it to <code>Client.note()</code>.</p>

<h2>v0.9.0 - The plugin update</h2>

<ul>
    <li>Updated <a href="https://npmjs.org/package/tennu-modules"><code>tennu-modules</code></a> v2.x.x to <a href="https://npmjs.org/package/tennu-plugins"><code>tennu-plugins</code></a> v3.0.x.</li>
    <li>Moved <code>lib/event-emitter.js</code> to its own package, <a href="https://npmjs.org/package/after-events"><code>after-events</code></a>.</li>
    <li>
        <p>Made changes to configuration properties.</p>
        <ul>
            <li><code>nick</code><sup>1</sup> -> <code>nickname</code></li>
            <li><code>user</code><sup>1</sup> -> <code>username</code></li>
            <li><code>modules</code> -> <code>plugins</code></li>
            <li><code>trigger</code> -> <code>command-trigger</code></li>
            <li><code>password</code><sup>2</sup> -> <code>auth-password</code></li>
        </ul>

        <ol class="footnotes">
            <li>Actually, these properties will now just throw an error when used. The replacements were added in v.0.8.4.</li>
            <li><code>password</code> still works for the server password, only the nickserv password changed.</code></li>
        </ol>
    </li>
    <li>Removed receiver property from Message objects.</li>
    <li>Readded <a href="http://www.irc.org/tech_docs/005.html"><code>isupport</code></a> support in <a href="/plugins/server">server plugin</a>.</li>
    <li>Passed <code>isupport</code> object to Message factory. Unused by factory in this release.</li>
    <li>Plugins and client.js are using <a href="http://sweetjs.org">sweet.js</a>, and must now be built when changed.</li>
</ul>

<h3>Upgrade Notes</h3>

<p>You'll definitely want to update your configuration files and/or objects for the property changes.</p>
<p>If you're using a <code>tennu_modules</code> directory, rename the directory to <code>tennu_plugins</code>.</p>
<p>Anywhere in your code and documentation that you are using 'module', change it to 'plugin'.</p>

<h3>Historical Notes</h3>

<p>The change from calling them modules to plugins is because it was getting confusing to refer to a Node module and a Tennu module, and they really needed to be called something different. Looking at Tennu today, they should really be called components, but it's not worth breaking the ecosystem to rename them <i>again</i>.

<h2>v0.8.4</h2>

<ul>
    <li>Update <a href="https://npmjs.org/package/irc-socket"><code>irc-socket</code></a> to v.2.2.x.</li>
    <li>
        <p>Configuration additions from the update:</p>
        <ul>
            <li><code>nickname</code> - Alias for <code>nick</code>.</li>
            <li><code>username</code> - Alias for <code>user</code>.</li>
            <li><code>ipv6</code></li>
            <li><code>localAddress</code></li>
        </ul>
    </li>
    <li>(Thanks <a href="https://github.com/metalbot">metalbot</a>) Nick highlight command trigger case is now case-insensitive.</li>
    <li>BiSubscriber and Client gain <code>.off()</code> method which take the same properties as <code>.on()</code>, but removes the listeners. There is no way to remove listeners added by <code>.once()</code> though. File an issue if you need this.</li>
</ul>

<h2>v0.8.3</h2>

<ul>
    <li><a href="/documentation/api/response">Response object</a> can now take a <span title="Either a channel or a nickname" style="text-decoration: underline;">target</span>.</li>
    <li><a href="https://fez.github.io/">Fez</a> is now working.</li>
</ul>

<h2>v0.8.2</h2>

<ul>
    <li>Added <code>disable-help</code> to <a href="/documentation/api/configuration">configuration</a> for disabling the help plugin.</li>
    <li><a href="/documentation/api/response">Response can now be an object.</a></li>
    <li>Added <a href="https://fez.github.io/">fez</a> and <a href="//sweetjs.org">sweet.js</a> to start a build process. Only tests are built in this version.</li>
</ul>

<h2>v0.8.1</h2>

<ul>
    <li>Fixed <code>client.ctcp()</code> and <code>client.act()</code>.</li>
    <li>Renamed <code>client.initialize()</code> to <code>client.initializeModule()</code>.</li>
    <li>Renamed <code>client.isInisInitializable</code> to <code>client.isModuleInitializable()</code>.</li>
</ul>

<h2>v0.8.0 - The promised update</h2>

<ul>
    <li>Beginning promise support by allowing <a href="/documentation/api/response">response</a> object to be a promise for its respective type.</li>
    <li>Moved nickname tracking code to its own module.</li>
    <li>
        <p>Updated to <a href="//npmjs.org/package/tennu-plugins"><code>tennu-modules</code></a> v.2.0.x.</p>
        <p>Modules are now objects with the following properties:</p>
        <ul>
            <li>init</li>
            <li>requires</li>
            <li>requiresRoles</li>
            <li>role</li>
            <li>name</li>
        </ul>
    </li>
</ul>

<h2>v0.7.2 - The whois update</h2>

<ul>
    <li>
        <p><a href="/documentation/api/message-properties">Message extensions</a> for the following numerics:</p>
        <dl>
            <dt>307</dt><dd>RPL_WHOISREGNICK</dd>
            <dt>311</dt><dd>RPL_WHOISUSER</dd>
            <dt>312</dt><dd>RPL_WHOISSERVER</dd>
            <dt>317</dt><dd>RPL_WHOISIDLE</dd>
            <dt>318</dt><dd>RPL_ENDOFWHOIS</dd>
            <dt>319</dt><dd>RPL_WHOISCHANNELS</dd>
            <dt>330</dt><dd>RPL_WHOISLOGGEDIN</dd>
            <dt>378</dt><dd>RPL_WHOISHOST</dd>
            <dt>401</dt><dd>ERR_NOSUCHNICK</dd>
        </dl>
    </li>
    <li>Numerics with extensions will have the <code>MessageHandler</code> emit the replyname.</li>
    <li><a href="/plugins/user">User plugin</a> exports <code>isIdentifedAs(nickname, nickname_identified, callback).</code></li>
    <li>Added mocha, sinon, deep-eql, and better-assert to <code>devDependencies</code>.</li>
    <li>Added <code><a href="https://github.com/Tennu/tennu/tree/master/test">/test</a></code> directory for Mocha tests.</li>
</ul>

<h2>v0.7.1</h2>

<ul>
    <li>
        <p>Command Line tool improvements:</p>
        <ul>
            <li>-d flag for logging debug. Must be paired with -v.</li>
            <li>Errors log their stacktrace.</li>
        </ul>
    </li>
    <li><code>OutputSocket#rawf(format, args...)</code></li>
    <li><code>MessageHandler</code> and <code>CommandHandler</code> log to "error" the stack of the error.</li>
    <li>Bugfix: <code>CommandHandler</code> listener to <code>MessageHandler</code> no longer returns.</li>
    <li>Bugfix: Pass socket and logger to <code>MessageHandler</code> in correct order!</li>
</ul>

<h2>v0.7.0 - Logging and Command Line Interface</h2>

<ul>
    <li>
        <p>Logging Interface:</p>
        <ul>
            <li>Levels (also methods): <code>debug</code>, <code>info</code>, <code>notice</code>, <code>warn</code>, <code>error</code>, <code>crit</code>, <code>alert</code>, <code>emerg</code></li>
            <li><code>.log(level, ...log_message);</code></li>
            <li>Logs to nothing by default, so you'll have to <a href="/documentation/api/configuration">pass in a Logger</a>.</li>
        </ul>
    <li>Deprecation: <code>.nick()</code> nullary version deprecated. Use <code>.nickname()</code> instead.</li>
    <li>KICK <a href="/documentation/api/message-properties">message extension</a> added (channel, kicked, kicker)</a></li>
    <li><code>.then()</code> changed to <code>.after()</code> in <code>./lib/event-emitter</code> to avoid `thennable assimilation` in ES6.</li>
    <li>Command Line Tool added. (Use via <code>./node_modules/tennu/bin/cli.js config.json -v</code>)</li>
</ul>

<p class="notice">There are two critical bugs in this release. They are fixed in v.0.7.1.</p>

<h2>v.0.6.1</h2>

<ul>
    <li>Bugfix: Commands won't echo the raw message back to the originating channel.</li>
    <li>Bugfix: Unfreeze Messages parsed by MessageParser.</li>
    <li>Commands return values are echoed to the originating channel (if they are strings).</li>
</ul>

<h2>v0.6.0 - The irc-message update.</h2>

<ul>
    <li>BACKWARDS INCOMPATIBLE! Changed property names for Message and Command to align with IRC specification and the irc-message module.</li>
    <li>BACKWARDS INCOMPATIBLE! Messages with command type of "nick" have the "newNick" property changed to "new"</li>
    <li>BACKWARDS INCOMPATIBLE! Removed the extension for the 353 numeric. It wasn't actually doing anything useful. It'll be readded in the future, but actually do some useful parsing. Use .params[0] to get it..</li>
    <li>Help Module reimplemented. See "help.md" for more information.</li>
    <li>"Respond" functionality. The return value for listeners that have a channel is said to the channel. No more doing tennu.say(message.channel, what_you_want_to_say). Just do `return what_you_want_to_say;`! In the future, we'll allow promises too.</li>
    <li>Add .out and .events to Client as aliases to the OutputSocket and BiSubscriber.</li>
    <li>Messages with the command type of "nick" have the property "old" added, which is an alias for the "nickname" property.</li>
    <li>Commands have a [[prototype]] of the Message that they are parsed from.</li>
    <li>Message have a tags property. (See: <a href="//ircv3.org/specification/message-tags-3.2">the spec</a> and <a href="//github.com/expr/irc-message">expr/irc-message</a>)</li>
    <li>Removed all default logging.</li>
    <li>Use <a href="https://github.com/expr/irc-message">irc-message</a> as the base Message parser.</li>
    <li>Replaced mout with lodash.</li>
    <li>Removed Grunt.js</li>
    <li>Bugfix: Multiple spaces between words will not mess up commands and message parsing. Thanks expr for reporting.</li>
    <li>Bugfix: Arbitrary events won't fire when passed incomplete messages from server (fixed in <a href="//npmjs.org/package/irc-socket">irc-socket</a>)</li>
    <li>Bug: On command, the client will echo the raw message to the channel.</li>
</ul>

<h2>v0.5.3</h2>

<ul>
    <li>Hotfix: this._name() doesn't exist in CommandParser</li>
</ul>

<h2>v0.5.2</h2>

<ul>
    <li>Require 1.0.1 of simple-irc-socket for logging.</li>
</ul>

<h3>Historical Note</h3>

<p>The package <a href="//npmjs.org/package/irc-socket">irc-socket</a> was originally called "simple-irc-socket". Since calling things "simple" in their name is a bad idea, it was quickly dropped.</p>

<h2>v0.5.1</h2>

<ul>
    <li>Fixed OutputSocket.ctcp and OutputSocket.act</li>
</ul>

<h2>v0.5.0 - The Tennu Update</h2>

<ul>
    <li>Moved <a href="//npmjs.org/package/tennu-plugins">module system</a> to its own project.</li>
    <li>Module system completely revamped.</li>
    <li>Module loading via name and tennu_modules directory-tree climb.</li>
    <li>Modules no longer have internal 'name' property.</li>
    <li>Moved <a href="//npmjs.org/package/irc-socket">IRC socket</a> to its own project.</li>
    <li>Got the project building again.</li>
    <li>Renamed from NRC (Node Relay Client) to Tennu</li>
</ul>

<h3>Historical Notes</h3>

<p>This project used to be called Node Relay Client. This was because Havvy was uncreative with names. During the v.0.5.0 update, the project was renamed such that it was easier to call the project by something unique. Good thing too, since Node.js has forks nowadays.</p>

<h2>v0.4.4</h2>

<ul>
    <li>Made dependency injection argument of Client optional.</li>
    <li>Started the ChunkedMessageParser. Not working.</li>
</ul>

<h2>v0.4.3</h2>

<ul>
    <li>Nrc class renamed to Client.</li>
    <li>`whois` method added to IrcOutputSocket/Client</li>
    <li>Moved startup stuff from IrcMessageHandler to Client.</li>
    <li>Internal: Removed config parameter from IrcMessageHandler constructor. :)</li>
    <li>Testing of 'say', 'part', and 'quit' of the IrcOutputSocket.</li>
</ul>

<h2>v0.4.2 (Unreleased)</h2>

<ul>
    <li>Renamed classes.</li>
    <li>Added an IrcOutputSocket class. NRC absorbs it of course.</li>
    <li>Added everything to the index.</li>
    <li>Got Dependency Injection for all non-structure objects.</li>
    <li>Added `userhost` method to IrcOutputSocket/NRC.</li>
</ul>

<h2>v0.4.1</h2>

<ul>
    <li>Added a new test for Message Handlers.</li>
</ul>

<h3>Historical Notes</h3>

<p>Oh hah...pushing out a new release just because there are more tests.</p>

<h2>v0.4.0 - The Module update</h2>

<ul>
    <li>Event listeners are no longer bound to 'nrc'.</li>
    <li>Message and Command objects use 'args' instead of 'params/parameters'. This follows the same naming convention that node-irc uses.</li>
    <li>Default NRC Modules are refactored so that they return a function that returns a module.</li>
    <li>ModuleSubscriber.requires() interface contract changed so that it takes a one-arg constructor (that arg being the NRC object for the server the module will be on) that returns a module.</li>
    <li>Module contract gains additional optional field for dependencies: + dependencies(undefined U ModuleExports): List[String] U undefined</li>
    <li>Only the server module works.</li>
</ul>

<h2>v0.3.0</h2>

<ul>
    <li>Removal of the Protocols dependency. There's no logging at the moment.</li>
    <li>Modules are moved to their own object.</li>
    <li>BiSubscriber handlers the subscribing of events to either the IRCMessageEmitter or the IRCCommandEmitter.</li>
    <li>Default NRC Modules are disabled (until the next version)</li>
</ul>

<h2>v0.2.0</h2>

<ul>
    <li>Module system added.</li>
</ul>

<h2>v0.1.0</h2>

<ul>
    <li>Rewrite of original nrc module.</li>
</ul>